(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{175:function(e,t,a){"use strict";a.r(t);var n=a(53),r=a.n(n),i=a(16),o=a.n(i),s=a(0),c=a.n(s),l=a(199),u=a(187),d=a(3),p=a.n(d),m=a(191),h=a(234),g=a.n(h),f=a(235),y=a.n(f),E=a(205),b=a.n(E),w=a(206),v=a.n(w),x=a(207),T=a.n(x),k=a(265),C=a.n(k),S=a(194),_="https://ktichmann-ticketing-system.herokuapp.com",N=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={title:"",description:"",addUser:"",users:[],emptyTitle:!1,emptyDescription:!1,emtpyTitleText:"",emptyDescriptionText:"",group_id:""},a.handleChange=a.handleChange.bind(r()(a)),a}o()(t,e);var a=t.prototype;return a.handleChange=function(e,t){var a={};a[e]=t.target.value,this.setState(a)},a.addUser=function(){var e=this;this.state.users.indexOf(this.state.addUser)>-1||fetch(_+"/user/check-user/"+this.state.addUser).then(function(e){return e.json()}).then(function(t){t.userExists&&e.setState(function(e){return{users:[].concat(e.users,[e.addUser])}})}).catch(function(e){console.log(e)})},a.handleSubmit=function(e){var t=this;if(e.preventDefault(),this.setState({emptyTitle:!1,emptyTitleText:"",emptyDescription:!1,emptyDescriptionText:""}),""===this.state.title||""===this.state.description)""===this.state.title&&this.setState({emptyTitle:!0,emptyTitleText:"Group title cannot be empty"}),""===this.state.description&&this.setState({emptyDescription:!0,emptyDescriptionText:"Group description cannot be empty"});else{var a="title="+this.state.title+"&description="+this.state.description;fetch(_+"/group/create",{method:"POST",headers:{Authorization:sessionStorage.getItem("ticketing_token"),"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(function(e){return e.json()}).then(function(e){if(e.success){t.setState({group_id:e.data.group_id});var a={group_id:e.data.group_id,admins:t.state.users};t.state.users.length>0?(fetch(_+"/group/add-admin",{method:"POST",headers:{Authorization:sessionStorage.getItem("ticketing_token"),"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.success?document.getElementById("redirectToNewGroup").click():console.log("no bueno!")}),t.state.users.map(function(e){fetch(_+"/group/add/"+e)})):document.getElementById("redirectToNewGroup").click()}}).catch(function(e){console.log(e)})}},a.render=function(){var e=this,t=this.props.classes;return c.a.createElement(l.a,null,c.a.createElement("form",{className:t.container},c.a.createElement(g.a,{error:this.state.emptyTitle,id:"title",label:"Title",className:t.textField,value:this.state.title,margin:"normal",variant:"outlined",onChange:function(t){return e.handleChange("title",t)}}),c.a.createElement(C.a,{id:"title-error-text"},this.state.emptyTitleText),c.a.createElement(g.a,{error:this.state.emptyDescription,id:"description",label:"Description",className:t.textField,value:this.state.description,margin:"normal",variant:"outlined",multiline:!0,rows:"6",onChange:function(t){return e.handleChange("description",t)}}),c.a.createElement(C.a,{id:"description-error-text"},this.state.emptyDescriptionText),c.a.createElement(b.a,{className:t.list},this.state.users.map(function(e){return c.a.createElement(v.a,null,c.a.createElement(T.a,{key:e,style:{marginBottom:"1rem"}},e))})),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},c.a.createElement(g.a,{id:"add-user",label:"Add a user",className:t.addUser,value:this.state.addUser,margin:"normal",variant:"outlined",style:{width:"65%"},onChange:function(t){return e.handleChange("addUser",t)}}),c.a.createElement(y.a,{variant:"contained",color:"inherit",onClick:function(t){return e.addUser()},style:{width:"30%"}},"Add a user")),c.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit",style:{marginTop:"1rem"},onClick:function(t){return e.handleSubmit(t)}},"Create Group")),c.a.createElement(m.a,{id:"redirectToNewGroup",to:"/ticket-dashboard",state:{group_id:this.state.group_id}}))},t}(c.a.Component);N.propTypes={classes:p.a.object.isRequired},t.default=Object(S.a)(Object(u.withStyles)(function(e){return{container:{display:"flex",flexDirection:"column",width:"60%",margin:"0px auto"}}})(N))},191:function(e,t,a){"use strict";a.d(t,"b",function(){return u});var n=a(0),r=a.n(n),i=a(3),o=a.n(i),s=a(51),c=a.n(s);a.d(t,"a",function(){return c.a});a(192);var l=r.a.createContext({}),u=function(e){return r.a.createElement(l.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};u.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}},192:function(e,t,a){var n;e.exports=(n=a(195))&&n.default||n},194:function(e,t,a){"use strict";var n=a(16),r=a.n(n),i=a(0),o=a.n(i),s=a(187),c=a(212),l=a.n(c),u=a(208),d=a.n(u),p=a(198);t.a=function(e){return function(t){function a(e){var a;return(a=t.call(this,e)||this).muiPageContext=Object(p.a)(),a}r()(a,t);var n=a.prototype;return n.componentDidMount=function(){var e=document.querySelector("#jss-server-side");e&&e.parentNode&&e.parentNode.removeChild(e)},n.render=function(){return o.a.createElement(d.a,{generateClassName:this.muiPageContext.generateClassName},o.a.createElement(s.MuiThemeProvider,{theme:this.muiPageContext.theme,sheetsManager:this.muiPageContext.sheetsManager},o.a.createElement(l.a,null),o.a.createElement(e,this.props)))},a}(o.a.Component)}},195:function(e,t,a){"use strict";a.r(t);a(40);var n=a(0),r=a.n(n),i=a(3),o=a.n(i),s=a(79),c=a(6),l=function(e){var t=e.location,a=c.default.getResourcesForPathnameSync(t.pathname);return a?r.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json)):null};l.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=l},196:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter"}}}}},197:function(e,t,a){e.exports=a.p+"static/avatar-2aee737878818d0ad5453d604fa5a81d.png"},198:function(e,t,a){"use strict";(function(e,n){a.d(t,"a",function(){return c});a(105),a(78),a(54),a(103),a(211);var r=a(201),i=a(187),o=Object(i.createMuiTheme)({palette:{primary:{main:"#663399"},secondary:{main:"#ffb238"}},typography:{useNextVariants:!0}});function s(){return{theme:o,sheetsManager:new Map,sheetsRegistry:new r.SheetsRegistry,generateClassName:Object(i.createGenerateClassName)()}}function c(){return e.browser?(n.__INIT_MATERIAL_UI__||(n.__INIT_MATERIAL_UI__=s()),n.__INIT_MATERIAL_UI__):s()}}).call(this,a(210),a(21))},199:function(e,t,a){"use strict";var n=a(196),r=a(0),i=a.n(r),o=a(3),s=a.n(o),c=a(191),l=a(53),u=a.n(l),d=a(16),p=a.n(d),m=(a(40),a(217)),h=a.n(m),g=a(213),f=a.n(g),y=a(214),E=a.n(y),b=a(215),w=a.n(b),v=a(220),x=a.n(v),T=a(184),k=a.n(T),C=a(206),S=a.n(C),_=a(223),N=a.n(_),D=a(205),I=a.n(D),j=a(207),O=a.n(j),A=a(216),M=a.n(A),R=a(187),P=a(204),U=a.n(P),B=a(225),G=a.n(B),q=a(224),L=a.n(q),F=a(219),z=a.n(F),J=a(226),W=a.n(J),H=a(222),Q=a.n(H),V=a(197),K=a.n(V),X=a(221),Y=a.n(X),Z=a(77),$=(a(194),Object(R.createMuiTheme)({typography:{fontFamily:"Lato"},overrides:{MuiTypography:{body1:{color:"white"},subheading:{color:"white"}}}})),ee=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.state={open:!1,groups:[]},a.fetchData=a.fetchData.bind(u()(a)),a}p()(t,e);var a=t.prototype;return a.componentDidMount=function(){this.fetchData()},a.fetchData=function(){var e=this;fetch("https://ktichmann-ticketing-system.herokuapp.com/group/list",{headers:{Authorization:window.sessionStorage.getItem("ticketing_token")}}).then(function(e){return e.json()}).then(function(t){t.data&&(e.props.dispatchAddGroups(t.data),e.setState({groups:e.props.data.groups}))}).catch(function(e){return console.log(e)})},a.componentDidUpdate=function(){var e=this.state.open;document.getElementById("mainContentLayout").style.margin=e?"6rem 3rem 6rem 15rem":"6rem 3rem"},a.render=function(){var e,t=this.state,a=t.open,n=t.groups,r=this.props.classes;return i.a.createElement(R.MuiThemeProvider,{theme:$},i.a.createElement("header",{className:r.root},i.a.createElement(f.a,{position:"fixed",className:k()(r.appBar,(e={},e[r.appBarShift]=a,e))},i.a.createElement(E.a,null,i.a.createElement(w.a,{color:"inherit","aria-label":"Open Drawer",onClick:this.handleDrawerOpen,className:k()(r.menuButton,a&&r.hide)},i.a.createElement(M.a,null)),!a&&i.a.createElement(U.a,{variant:"h6",color:"inherit",noWrap:!0},"Ticketing"))),i.a.createElement(h.a,{variant:"persistent",anchor:"left",open:a,className:r.drawer,classes:{paper:r.drawerPaper}},i.a.createElement("div",{className:r.drawerHeader},i.a.createElement(U.a,{variant:"h6",color:"inherit",noWrap:!0,style:{left:"30px",position:"fixed",color:"white"}},"bOnline"),i.a.createElement(w.a,{color:"inherit",onClick:this.handleDrawerClose},i.a.createElement(z.a,null))),i.a.createElement(x.a,null),i.a.createElement(Y.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:r.avatarSection},i.a.createElement(Q.a,{alt:"Remy",src:K.a,className:r.bigAvatar}),i.a.createElement(U.a,{variant:"h6",color:"inherit",noWrap:!0},"undefined"==typeof window?"":sessionStorage.getItem("ticketing_username"))),i.a.createElement(I.a,{className:r.groupsSection},n.map(function(e){return i.a.createElement(c.a,{key:e.group_id,to:"/ticket-dashboard",state:{group_id:e.group_id}},i.a.createElement(S.a,{id:e.group_id,className:r.group,button:!0,key:e.group_id},i.a.createElement(O.a,{style:{color:"white !important"},primary:e.title})))})),i.a.createElement(I.a,{className:r.drawerPaper,style:{bottom:"0rem",position:"fixed",color:"white"}},i.a.createElement(c.a,{to:"/group/create"},i.a.createElement(S.a,{button:!0},i.a.createElement(N.a,{color:"inherit"},i.a.createElement(L.a,{style:{color:"white"}})),i.a.createElement(O.a,{primary:"Create a Group"}))),i.a.createElement(c.a,{to:"/"},i.a.createElement(S.a,{button:!0},i.a.createElement(N.a,{color:"inherit"},i.a.createElement(G.a,{style:{color:"white"}})),i.a.createElement(O.a,{primary:"Dashboard"}))),i.a.createElement("div",{onClick:function(){sessionStorage.removeItem("ticketing_token"),window.location.reload()}},i.a.createElement(S.a,{button:!0},i.a.createElement(N.a,{color:"inherit"},i.a.createElement(W.a,{style:{color:"white"}})),i.a.createElement(O.a,{primary:"Log Out"})))))))},t}(i.a.Component);ee.propTypes={siteTitle:s.a.string},ee.defaultProps={siteTitle:""};var te=Object(Z.b)(function(e){return{data:e.groups}},function(e){return{dispatchAddGroups:function(t){return e(function(e){return{type:"ADD_GROUPS",groups:e}}(t))}}})(ee),ae=Object(R.withStyles)(function(e){return{"@global":{"*::-webkit-scrollbar":{width:".5rem"},"*::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,1)"}},root:{display:"flex",color:"white !important"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - 240px)",marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#3A1772",padding:"0px",overflow:"hidden"},drawerHeader:Object.assign({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),avatarSection:{padding:"1rem",backgroundColor:"rgba(255, 255, 255, .15)",fontFamily:"Roboto Condensed"},bigAvatar:{margin:10,width:60,height:60},groupsSection:{boxShadow:"0px -2px 1px 1px rgba(0,0,0,.1)",paddingTop:"0px",height:"65%",overflow:"scroll"},group:{borderBottom:".5px solid rgba(255,255,255,.1)",textAlign:"center",transition:"background-color .7s","&:hover":{backgroundColor:"rgba(250, 250, 250, .2)",transition:"background-color .7s"}}}},{withTheme:!0})(te),ne=(a(227),function(e){var t=e.children;e.groups;return"undefined"!=typeof window&&(sessionStorage.getItem("ticketing_token")||"/ticketing-dashboard/user/log-in"!==window.location.pathname&&"/ticketing-dashboard/user/sign-up"!==window.location.pathname&&window.addEventListener("load",function(){document.getElementById("redirect").click()})),i.a.createElement(c.b,{query:"2994927498",render:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ae,{siteTitle:e.site.siteMetadata.title}),i.a.createElement("div",{id:"mainContentLayout",style:{margin:"5rem 3rem",padding:"0px 1.0875rem 1.45rem",paddingTop:0,transition:"margin .4s"}},i.a.createElement("main",null,t),i.a.createElement("footer",null),i.a.createElement(c.a,{id:"redirect",to:"/user/log-in"})))},data:n})});ne.propTypes={children:s.a.node.isRequired};t.a=ne}}]);
//# sourceMappingURL=component---src-pages-group-create-js-f23c6184bbe18a11f6af.js.map